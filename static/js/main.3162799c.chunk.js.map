{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Buton.module.css","components/SearchBar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","helpers/images-api.js","App.js","helpers/mapper.js","index.js","components/SearchBar/Searchbar.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","query","setQuery","className","s","searchbar","searchForm","e","preventDefault","trim","toast","type","searchForm__button","searchForm__buttonLabel","searchForm__input","onChange","console","log","target","value","autoComplete","autoFocus","placeholder","ImageGalleryItem","webformatURL","onModal","largeImageURL","tags","galleryItemImage","onClick","src","alt","ItemGallery","images","onImgClick","gallery","map","id","gallery__item","Button","button","modalRoot","document","querySelector","Modal","onClose","useEffect","window","addEventListener","onEscapeHandler","removeEventListener","code","createPortal","overlay","currentTarget","modal","api","fetchImages","newQuery","queryPage","fetch","then","response","ok","json","Promise","reject","Error","App","setLargeImageURL","showModal","setShowModal","page","setPage","setImages","setError","loading","setLoading","toggleModal","fetchImgOnQuery","data","hits","length","mapper","scrollTo","top","documentElement","scrollHeight","behavior","catch","error","searchData","style","position","left","transform","zIndex","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3162799c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__gboaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery__item\":\"ImageGalleryItem_gallery__item__2Ejrd\",\"galleryItemImage\":\"ImageGalleryItem_galleryItemImage__3lhrt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Buton_button__1RuTa\"};","import { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport s from \"./Searchbar.module.css\";\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState(\"\");\n\n  const onChangeHandler = (e) => {\n    console.log(e.target.value);\n    setQuery(e.target.value);\n  };\n\n  const onFormSubmitHandler = (e) => {\n    e.preventDefault();\n    if (query.trim() === \"\") {\n      toast(\"Enter your  query\");\n      return;\n    }\n    onSubmit(query);\n    setQuery(\"\");\n  };\n\n  return (\n    <header className={s.searchbar}>\n      <form className={s.searchForm} onSubmit={onFormSubmitHandler}>\n        <button type=\"submit\" className={s.searchForm__button}>\n          <span className={s.searchForm__buttonLabel}>Search</span>\n        </button>\n\n        <input\n          className={s.searchForm__input}\n          type=\"text\"\n          onChange={onChangeHandler}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={query}\n        />\n      </form>\n    </header>\n  );\n}\n\n// export default class Searchbar extends Component {\n//   state = {\n//     query: '',\n//   };\n//   onChangeHandler = e => {\n//     console.log(e.target.value);\n//     this.setState({\n//       query: e.target.value,\n//     });\n//   };\n//   onFormSubmitHandler = e => {\n//     e.preventDefault();\n//     if (this.state.query.trim() === '') {\n//       toast('Enter your  query');\n//       // this.reset();\n//       return;\n//     }\n//     this.props.onSubmit(this.state);\n//     this.setState({\n//       query: '',\n//     });\n//   };\n\n//   render() {\n//     return (\n//       <header className={s.searchbar}>\n//         <form className={s.searchForm} onSubmit={this.onFormSubmitHandler}>\n//           <button type=\"submit\" className={s.searchForm__button}>\n//             <span className={s.searchForm__buttonLabel}>Search</span>\n//           </button>\n\n//           <input\n//             className={s.searchForm__input}\n//             type=\"text\"\n//             onChange={this.onChangeHandler}\n//             autoComplete=\"off\"\n//             autoFocus\n//             placeholder=\"Search images and photos\"\n//             value={this.state.query}\n//           />\n//         </form>\n//       </header>\n//     );\n//   }\n// }\n","import s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\nexport default function ImageGalleryItem({\n  webformatURL,\n  onModal,\n  largeImageURL,\n  tags,\n}) {\n  return (\n    <img\n      className={s.galleryItemImage}\n      onClick={() => onModal(largeImageURL)}\n      src={webformatURL}\n      alt={tags}\n    />\n  );\n}\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  onModal: PropTypes.func.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n};\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\n\nexport default function ItemGallery({ images, onImgClick }) {\n  return (\n    <ul className={s.gallery}>\n      {images.map(({ id, webformatURL, largeImageURL, tags }) => {\n        return (\n          <li className={s.gallery__item} key={id}>\n            <ImageGalleryItem\n              webformatURL={webformatURL}\n              onModal={onImgClick}\n              tags={tags}\n              largeImageURL={largeImageURL}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nItemGallery.propTypes = {\n  images: PropTypes.array.isRequired,\n  onImgClick: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport s from './Buton.module.css';\n\nexport function Button({ onClick }) {\n  return (\n    <button type=\"button\" onClick={onClick} className={s.button}>\n      Load more\n    </button>\n  );\n}\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport s from \"./Modal.module.css\";\n\n//создаем  в index.html  div , куда будет  встроена модалка  и  выбираем его\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default function Modal({ largeImageURL, onClose }) {\n  useEffect(() => {\n    window.addEventListener(\"keydown\", onEscapeHandler);\n    return () => {\n      window.removeEventListener(\"keydown\", onEscapeHandler);\n    };\n  }, []);\n\n  //обработчик  клика на  бекдроп для закрытия\n  const handleBackdrop = (e) => {\n    console.log(e.target);\n    console.log(e.currentTarget);\n    if (e.target === e.currentTarget) {\n      // вызываем  ф-ю,  которая  указана в props    модалки который прописан  в Аpp -  onClose\n      onClose();\n    }\n  };\n\n  const onEscapeHandler = (e) => {\n    console.log(e.code);\n    if (e.code === \"Escape\") {\n      // вызываем  ф-ю,  которая  указана в props    модалки который прописан  в Аpp -  onClose\n      onClose();\n    }\n  };\n  ///при рендере  создется  портал , где становится модалка,   в  скобках  -  что  ставим,   куда\n\n  return createPortal(\n    <div className={s.overlay} onClick={handleBackdrop}>\n      <div className={s.modal}>\n        <img src={largeImageURL} alt=\"\" />\n      </div>\n    </div>,\n    modalRoot\n  );\n}\n","function fetchImages(newQuery, queryPage) {\n  return fetch(\n    `https://pixabay.com/api/?q=${newQuery}&page=${queryPage}&key=23459903-45cdb2e5cfc763a2eaddc7311&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error(`Image ${newQuery} not found`));\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\n// import s from \"./components/Loader/Loader.module.css\";\n// import Loader from \"./components/Loader/Loader.module.css\";\n\nimport Searchbar from \"./components/SearchBar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport { Button } from \"./components/Button/Button\";\nimport Modal from \"./components/Modal/Modal\";\nimport { mapper } from \"./helpers/mapper\";\nimport api from \"./helpers/images-api\";\n\nexport default function App() {\n  const [query, setQuery] = useState(\"\");\n  const [largeImageURL, setLargeImageURL] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [page, setPage] = useState(1);\n  const [images, setImages] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const toggleModal = (largeImageURL) => {\n    console.log(\"click  on list\", largeImageURL);\n    setShowModal(!showModal);\n    setLargeImageURL(largeImageURL);\n  };\n\n  const handleSearchSubmit = (searchData) => {\n    setQuery(searchData);\n    console.log(searchData);\n  };\n\n  useEffect(() => {\n    if (query === \"\") {\n      return;\n    }\n    console.log(query);\n    // if (prevQuery !== newQuery) {\n    console.log(\"запрос ізменілся\");\n    fetchImgOnQuery();\n  }, [query]);\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   const prevQuery = prevState.query;\n  //   const newQuery = this.state.query;\n  //   const queryPage = this.state.page;\n\n  //   if (prevQuery !== newQuery) {\n  //     console.log(\"запрос ізменілся\");\n  //     this.fetchImgOnQuery();\n  //   }\n  // }\n\n  const fetchImgOnQuery = () => {\n    // const { query, page } = this.state;\n    const { fetchImages } = api;\n\n    if (!query) {\n      return;\n    }\n    setLoading(true);\n    fetchImages(query, page)\n      .then((data) => {\n        console.log(data);\n        if (data.hits.length === 0) {\n          toast(\"No  images  found\");\n          return;\n        }\n        setImages([...images, ...mapper(data.hits)]);\n        setPage(page + 1);\n        setLoading(false);\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      })\n      .catch((error) => setError(error));\n  };\n\n  const style = {\n    position: \"fixed\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    zIndex: \"99\",\n  };\n\n  return (\n    <div className=\"container\">\n      <ToastContainer />\n      <Searchbar onSubmit={handleSearchSubmit} />\n\n      {loading && (\n        <div style={style}>\n          <Loader\n            type=\"Puff\"\n            color=\"#00BFFF\"\n            height={100}\n            width={100}\n            timeout={3000} //3 secs\n          />\n        </div>\n      )}\n\n      {images.length > 0 && (\n        <ImageGallery images={images} query={query} onImgClick={toggleModal} />\n      )}\n      {showModal && (\n        <Modal largeImageURL={largeImageURL} onClose={toggleModal} />\n      )}\n      {images.length > 11 && !loading && <Button onClick={fetchImgOnQuery} />}\n    </div>\n  );\n}\n","export const mapper = images => {\n  return images.map(({ id, webformatURL, largeImageURL, tags }) => ({\n    id,\n    webformatURL,\n    largeImageURL,\n    tags,\n  }));\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3O3yq\",\"searchForm\":\"Searchbar_searchForm__1TIz5\",\"searchForm__button\":\"Searchbar_searchForm__button__2MSMV\",\"searchFor__button\":\"Searchbar_searchFor__button__1rQRp\",\"searchForm__buttonLabel\":\"Searchbar_searchForm__buttonLabel__32T_J\",\"searchForm__input\":\"Searchbar_searchForm__input__2NNNq\"};"],"sourceRoot":""}